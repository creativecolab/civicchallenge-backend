language: php
services:
- mysql
php:
- 5.6
- 7.0
- 7.1
before_install:
- composer self-update
install:
- composer install --no-interaction
before_script:
- mysql -e 'CREATE DATABASE test;'
- cp .env.travis .env
- php artisan key:generate
- php artisan migrate
script:
- vendor/bin/phpunit
deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: l88GbsEGhxbpl0M245JXIPDlrQSK95vUDZo2K2tCx/+gzkfwksocHfdcHBMo5fJ3L21aQLN5fKnZWisAimxKLgMfPpWbGxOFrNRsMGWmE9QVPwosgpcfTJvlgH9RRxEyPEW/15agQ9S8YHfsA/LU/Pc8k21eUNQx7QVCwmjfQKNYlPE0owHpNS2FTWlZolNPqV8fHtvrczBfK31gViqFTooz13G2kOiF4D5ZXTb9S6ZamhkDdqmsDqd3Xf+FoTn+4Mth0G2LpNfF5JUbzV8w+1Nw0xkAGu939MSHd0cMrzcgo2WSaCSfuGPcHJZXeBSNpC5hL6Ck0V2I6yjKfSklOkmmIK2sfaX4NMypKjgi8pSyKZWit2S4N30diSi07SaVHuwvd5ix73XmpHjLZMN26Obo6rscHW3w+7VQZfb76p2WufnNPbwHwvird6FQnTdF00JPfG0L6Ri2ckLRxPrvXwIivCeOgAuOiz55RQmlhEO7r8ltoM321IpKBObbHEqIJxfX2bB/uFkWzSveed2Zb+C+DwM/bqDMX7er7QGeeIQBdMDjr4QGK/Xfo9mW+BvTvYmrHTtXy/oqUrZoofZXRNBgJ1RG6YqKNrqUh2NHBRI1zZot1fN47oJq0NdKH3sMTXCOU6eSXTZ7vTEZ3hcz7E2xC2YB0ZklhJHOXgRCKpw=
  secret_access_key:
    secure: kIC8Dkerqxd5cJigFfxdFKxIe1PIcRq48fSy/fKyRFxumGvQwgoQKnv5CG+cdm/xak312MHsFUG2VA9TQ5ucXCyR+G4C1DXzAj0tEje4GjJIqkSeZrNesQ1y972qb6xlG+3f/NxDiphGRuMiwR4ldW951tk2noDr1owfAv9TVkEnerqlALNKQGYJ6T3IeZZwb1ePvejukB6qnEAtK5AaGK0JF3KDCmKI88Oe+9NESgdife9ag18ScgW2+lxIz8fiaNX6a8v4onbMElKTNBZlYX7WEBz40w3a5nLtDBN7Xf8JNFIA8AP7Xjvyt1ufF0odvwBsnmzIC+ge7cZmW8DjddEgmZAZsveXD4YUF2VArdH3vZrj0k0adTecWPB1MoU0pIo0RENCnPP/4AkAYVO/R4rAcRT+Lmgjt4H+BdIR11s5YUWiCpgMQPTVWRhpsoHKV3gxA1MKRu7NAqQxT8isi7wdK/Vj9ckjU+vY6D9OrjXrH92mUVTeiiLSt1DCKX+D5/WKhmoLa9ve9otxVnQLr+W38Bvcd06dMu2GyZ3ST8CJP5rNsYTpEurw/xpZvVzyOS8wMBs5Z/PQtxnXnnk75MgyR+r1c98GSHQ2XcLDjgRP28B6oyWNewZHnSOOsKjQVJtM6bXnbkpMuvIBQCfhkRPZBbPzGii5tf9Mtsh2wq4=
  region: us-west-2
  app: d4sd-api
  env: d4sd-api-staging
  bucket_name: elasticbeanstalk-us-west-2-709500077301
  bucket_path: d4sd-api/staging
  on:
    repo: creativecolab/civicchallenge-backend
    php: 7.0
